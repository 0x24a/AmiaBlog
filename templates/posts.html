{% extends "base.html" %}

{% block content %}
    <p style="font-size: x-large;">{{ i18n.all_posts }}</p>
    {% if not is_static %}
    <mdui-select value="{{ order }}" helper="{{ i18n.search_order }}" onchange="updateOrder(this.value);">
      <mdui-menu-item value="date">{{ i18n.search_date }}</mdui-menu-item>
      <mdui-menu-item value="date_desc">{{ i18n.search_date_desc }}</mdui-menu-item>
      <mdui-menu-item value="modified">{{ i18n.search_modified }}</mdui-menu-item>
      <mdui-menu-item value="modified_desc">{{ i18n.search_modified_desc }}</mdui-menu-item>
    </mdui-select>
    <br><br>
    <mdui-divider></mdui-divider>
    {% endif %}
    <br>
    {% for post in posts %}
    <mdui-card href="/post/{{ post.slug }}{% if is_static %}.html{% endif %}" target="_blank" variant="elevated" style="width: 100%; background-color: rgb(var(--mdui-color-surface-container));">
        <div style="padding-left: 16px; padding-right: 16px;">
          <p style="font-size: large; font-weight: bold;">{{ post.metadata.title }}</p>
          <p>{{ post.metadata.description }}</p>
          {% for tag in post.metadata.tags %}
          <mdui-chip href="/tag/{{ tag | urlencode }}" target="_blank">{{ tag }}</mdui-chip>&nbsp;
          {% endfor %}
          <p style="display: flex; align-items: center; gap: 0.8rem; flex-wrap: wrap; color: rgb(var(--mdui-color-outline))">
            <span style="display: inline-flex; align-items: center; gap: 0.25rem;">
              <mdui-icon name="person"></mdui-icon> {{ post.metadata.author }}
            </span>
            <span>|</span>
            <span style="display: inline-flex; align-items: center; gap: 0.25rem;">
              <mdui-icon name="calendar_month"></mdui-icon> {{ post.metadata.date }}
            </span>
            <span>|</span>
            <span style="display: inline-flex; align-items: center; gap: 0.25rem;">
              <mdui-icon name="edit"></mdui-icon> {{ post.metadata.last_modified }}
            </span>
          </p>
        </div>
    </mdui-card>
    <br><br>
    {% endfor %}
    {% if not posts %}
        <p>{{ i18n.no_posts }}</p>
        <br>
    {% endif %}
{% endblock %}
{% if not is_static %}
{% block extra_scripts %}
<script>
function updateOrder(order) {
  setTimeout(() => {
    window.location.href = `/posts?order=${order}`;
  }, 200);
}
</script>
{% endblock %}
{% endif %}